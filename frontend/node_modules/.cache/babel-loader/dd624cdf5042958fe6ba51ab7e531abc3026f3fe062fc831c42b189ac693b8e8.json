{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import AITextPlatform from'./components/AITextPlatform.js';import Login from'./components/Login.js';import axios from'axios';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Check for existing token on app start\nconst token=localStorage.getItem('praivio_token');const userData=localStorage.getItem('praivio_user');if(token&&userData){try{// Set default authorization header\naxios.defaults.headers.common['Authorization']=\"Bearer \".concat(token);// Verify token is still valid by making a test request\naxios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/\")).then(()=>{setUser(JSON.parse(userData));setIsAuthenticated(true);}).catch(()=>{// Token is invalid, clear storage\nlocalStorage.removeItem('praivio_token');localStorage.removeItem('praivio_user');delete axios.defaults.headers.common['Authorization'];}).finally(()=>{setIsLoading(false);});}catch(error){console.error('Error parsing user data:',error);localStorage.removeItem('praivio_token');localStorage.removeItem('praivio_user');setIsLoading(false);}}else{setIsLoading(false);}},[]);const handleLoginSuccess=userData=>{setUser(userData);setIsAuthenticated(true);};const handleLogout=()=>{// Clear local storage\nlocalStorage.removeItem('praivio_token');localStorage.removeItem('praivio_user');// Clear axios headers\ndelete axios.defaults.headers.common['Authorization'];// Update state\nsetUser(null);setIsAuthenticated(false);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-lg\",children:\"Lade Praivio...\"})]})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{onLoginSuccess:handleLoginSuccess});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(AITextPlatform,{user:user,onLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/models\",element:/*#__PURE__*/_jsx(AITextPlatform,{user:user,onLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/templates\",element:/*#__PURE__*/_jsx(AITextPlatform,{user:user,onLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/statistics\",element:/*#__PURE__*/_jsx(AITextPlatform,{user:user,onLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(AITextPlatform,{user:user,onLogout:handleLogout})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","AITextPlatform","Login","axios","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","user","setUser","isLoading","setIsLoading","token","localStorage","getItem","userData","defaults","headers","common","concat","get","process","env","REACT_APP_API_URL","then","JSON","parse","catch","removeItem","finally","error","console","handleLoginSuccess","handleLogout","className","children","onLoginSuccess","path","element","onLogout","to","replace"],"sources":["/Users/fabian/Praivio/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport AITextPlatform from './components/AITextPlatform.js';\nimport Login from './components/Login.js';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing token on app start\n    const token = localStorage.getItem('praivio_token');\n    const userData = localStorage.getItem('praivio_user');\n    \n    if (token && userData) {\n      try {\n        // Set default authorization header\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        \n        // Verify token is still valid by making a test request\n        axios.get(`${process.env.REACT_APP_API_URL}/`)\n          .then(() => {\n            setUser(JSON.parse(userData));\n            setIsAuthenticated(true);\n          })\n          .catch(() => {\n            // Token is invalid, clear storage\n            localStorage.removeItem('praivio_token');\n            localStorage.removeItem('praivio_user');\n            delete axios.defaults.headers.common['Authorization'];\n          })\n          .finally(() => {\n            setIsLoading(false);\n          });\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n        localStorage.removeItem('praivio_token');\n        localStorage.removeItem('praivio_user');\n        setIsLoading(false);\n      }\n    } else {\n      setIsLoading(false);\n    }\n  }, []);\n\n  const handleLoginSuccess = (userData) => {\n    setUser(userData);\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = () => {\n    // Clear local storage\n    localStorage.removeItem('praivio_token');\n    localStorage.removeItem('praivio_user');\n    \n    // Clear axios headers\n    delete axios.defaults.headers.common['Authorization'];\n    \n    // Update state\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-white text-lg\">Lade Praivio...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login onLoginSuccess={handleLoginSuccess} />;\n  }\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<AITextPlatform user={user} onLogout={handleLogout} />} />\n        <Route path=\"/models\" element={<AITextPlatform user={user} onLogout={handleLogout} />} />\n        <Route path=\"/templates\" element={<AITextPlatform user={user} onLogout={handleLogout} />} />\n        <Route path=\"/statistics\" element={<AITextPlatform user={user} onLogout={handleLogout} />} />\n        <Route path=\"/settings\" element={<AITextPlatform user={user} onLogout={handleLogout} />} />\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}